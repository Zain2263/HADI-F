(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3184],{85369:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/school/student/_/general",function(){return l(37804)}])},77921:function(e,a,l){"use strict";l.d(a,{C:function(){return r}});var t=l(67294),s=l(5121),o=l(86501),n=l(89701),i=l(73361);let r=()=>{let[e]=(0,i.a)(),a=e&&(null==e?void 0:e.token),[l,r]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[m,u]=(0,t.useState)(!1),h=async()=>{d(!0);try{let{data:e}=await s.Z.get("".concat(n.b,"/my-profile"));e.ok&&r(e._profile)}catch(e){console.log(e),o.ZP.error("Failed, try again")}finally{d(!1)}};return(0,t.useEffect)(()=>{a&&h()},[a,m]),{profile:l,loading:c,refetch:()=>u(!m)}}},37804:function(e,a,l){"use strict";l.r(a);var t=l(85893),s=l(67294),o=l(84960),n=l(65400),i=l.n(n),r=l(70302),c=l(5121),d=l(86501),m=l(16371),u=l(77921),h=l(8015),p=l(89701),x=l(73361);let v={youtube:"",twitter:"",facebook:"",linkedin:"",instagram:"",behance:"",github:""};a.default=()=>{var e;let[a,l]=(0,x.a)(),{profile:n,refetch:g}=(0,u.C)(),[j,f]=(0,s.useState)(""),[N,y]=(0,s.useState)(""),[b,w]=(0,s.useState)(""),[k,S]=(0,s.useState)(""),[C,_]=(0,s.useState)(""),[L,Z]=(0,s.useState)(""),[P,B]=(0,s.useState)(!1),[E,I]=(0,s.useState)(!1),[F,O]=(0,s.useState)(!1),[W,T]=(0,s.useState)(v),[J,U]=(0,s.useState)(),[Y,D]=(0,s.useState)(),[G,A]=(0,s.useState)(!1),R=e=>{T({...W,[e.target.name]:e.target.value})},X=async()=>{I(!0);try{let{data:t}=await c.Z.get("".concat(p.b,"/my-profile"));if(t._profile){var e,a,l;w(t._profile.bio),_(t._profile.website),Z(t._profile.status),S(t._profile.location),T(t._profile.social),D(null==t?void 0:null===(l=t._profile)||void 0===l?void 0:null===(a=l.user)||void 0===a?void 0:null===(e=a.image)||void 0===e?void 0:e.url)}}catch(e){d.ZP.error("Failed, try again",m.W.toastBootom),console.log(e)}finally{I(!1)}},q=async e=>{var t;let s;e.preventDefault(),n?n&&(s="".concat(p.b,"/update/_profile")):s="".concat(p.b,"/_profile"),B(!0),j||d.ZP.error("Name is important",m.W.toastBootom);let o=new FormData;if(o.append("name",j),o.append("id",null==a?void 0:null===(t=a.user)||void 0===t?void 0:t._id),o.append("bio",b),o.append("website",C),o.append("location",k),o.append("image",J),o.append("status",L),Y||J||o.append("removeImage",G),W)for(let[e,a]of Object.entries(W))o.append("social[".concat(e,"]"),a),console.log("social[".concat(e,"]"),a);try{let{data:e}=await c.Z.post(s,o);if(g(),null==e?void 0:e.error)d.ZP.error(e.error,m.W.toastBootom);else{l({...a,user:{...null==a?void 0:a.user,name:e.name}});let t=JSON.parse(localStorage.getItem("auth"));t.user={...t.user,name:e.name,image:e.image},localStorage.setItem("auth",JSON.stringify(t)),B(!1),d.ZP.success("User updated successfully",m.W.toastBootom),X()}}catch(e){console.log(e),d.ZP.error("User update failed. Try again.",m.W.toastBootom),B(!1)}};return(0,s.useEffect)(()=>{var e,l;a&&(null==a?void 0:a.token)&&(X(),f(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.name),y(null==a?void 0:null===(l=a.user)||void 0===l?void 0:l.email))},[a,null==a?void 0:a.token]),(0,t.jsx)(h.Z,{children:(0,t.jsxs)(r.default,{title:"General Info ".concat(E?"loading...":""),children:[J&&!Y&&(0,t.jsxs)("div",{className:"form-group text-center py-2",children:[(0,t.jsx)(o.ZP,{width:"auto",style:{height:"150px",width:"150px"},src:null===(e=window)||void 0===e?void 0:e.URL.createObjectURL(J),onClick:()=>U()}),(0,t.jsx)("br",{}),(0,t.jsx)("small",{children:"Just click on image to remove."})]}),!Y&&!J&&(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Your Image "}),(0,t.jsx)("input",{onChange:e=>U(e.target.files[0]),type:"file",accept:"images/*",className:"form-control",id:"exampleFormControlInput1"}),(0,t.jsx)("small",{className:"form-text",children:"Please upload image within 1mb, formet jpg,jpeg,webp"})]}),Y&&(0,t.jsxs)("div",{className:"form-group text-center py-2",children:[(0,t.jsx)(o.ZP,{style:{height:"150px",width:"150px"},src:(0,p.v)(Y),onClick:()=>{U(),D()}}),(0,t.jsx)("br",{}),(0,t.jsx)("small",{children:"Just click on image to remove."})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Name "}),(0,t.jsx)("input",{maxLength:40,type:"text",className:"form-control",placeholder:"Company",name:"name",value:j,onChange:e=>f(e.target.value)})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Email "}),(0,t.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",value:N,readOnly:!0})]})})]}),(0,t.jsx)("div",{className:"col-md-12",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Bio "}),(0,t.jsx)("textarea",{maxLength:500,type:"text",className:"form-control",placeholder:"About...",name:"bio",value:b,onChange:e=>w(e.target.value)})]})}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Status "}),(0,t.jsx)("input",{maxLength:100,type:"text",className:"form-control",placeholder:"â€œStudent, Developer or etc",name:"status",value:L,onChange:e=>Z(e.target.value)})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Location "}),(0,t.jsx)("input",{maxLength:50,type:"email",className:"form-control",placeholder:"Your location",name:"location",value:k,onChange:e=>S(e.target.value)})]})})]}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Website "}),(0,t.jsx)("input",{maxLength:50,type:"email",className:"form-control",placeholder:"Any website you have?",name:"website",value:C,onChange:e=>_(e.target.value)})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"d-flex justify-content-start align-items-center  gap-2 form-group py-2",children:[(0,t.jsx)("label",{children:" Show Social Links "}),(0,t.jsx)("input",{type:"checkbox",checked:F,onChange:()=>O(!F)})]})}),F&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Facebook "}),(0,t.jsx)("input",{maxLength:60,type:"text",className:"form-control",placeholder:"Facebook",name:"facebook",value:null==W?void 0:W.facebook,onChange:R})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Instagram "}),(0,t.jsx)("input",{maxLength:60,type:"text",className:"form-control",placeholder:"Instagram",name:"instagram",value:null==W?void 0:W.instagram,onChange:R})]})})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Twitter "}),(0,t.jsx)("input",{maxLength:60,type:"text",className:"form-control",placeholder:"Twitter",name:"twitter",value:null==W?void 0:W.twitter,onChange:R})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Linkedin "}),(0,t.jsx)("input",{maxLength:60,type:"text",className:"form-control",placeholder:"Linkedin",name:"linkedin",value:null==W?void 0:W.linkedin,onChange:R})]})})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Youtube "}),(0,t.jsx)("input",{maxLength:60,type:"text",className:"form-control",placeholder:"Youtube",name:"youtube",value:null==W?void 0:W.youtube,onChange:R})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Behance "}),(0,t.jsx)("input",{maxLength:60,type:"text",className:"form-control",placeholder:"Behance",name:"behance",value:null==W?void 0:W.behance,onChange:R})]})})]}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group py-2",children:[(0,t.jsx)("label",{children:" Github "}),(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Github",name:"github",value:null==W?void 0:W.github,onChange:R})]})})]}),(0,t.jsx)("div",{className:"text-end",children:(0,t.jsx)(i(),{className:"CardieBg text-light",loading:P,onClick:q,children:"Submit"})})]})})}}},function(e){e.O(0,[5445,1228,9401,955,4617,1057,6556,9570,2160,2121,1664,8695,9169,2735,9523,4055,4737,4960,302,8890,2891,8905,4749,945,592,8015,9774,2888,179],function(){return e(e.s=85369)}),_N_E=e.O()}]);