(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3241],{73682:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/cms/accounts/single/[id]",function(){return s(72608)}])},51447:function(e,a,s){"use strict";var r=s(85893);s(67294);var t=s(24806);a.Z=e=>{let{children:a}=e;return(0,r.jsx)(t.Z,{api:"/current-cms-user",children:a})}},56911:function(e,a,s){"use strict";var r=s(85893),t=s(65400),l=s.n(t);s(67294),a.Z=e=>{let{onClick:a,icon:s,children:t,className:n,loading:o}=e;return(0,r.jsx)(l(),{className:n,icon:s,onClick:a,loading:o,children:t})}},72608:function(e,a,s){"use strict";s.r(a);var r=s(85893),t=s(51447),l=s(56911),n=s(89701),o=s(73361),c=s(70302),i=s(5121),d=s(11163),u=s(67294),m=s(86501);a.default=()=>{let e=(0,d.useRouter)(),{id:a}=e.query,[s,p]=(0,o.a)(),[h,x]=(0,u.useState)(""),[g,j]=(0,u.useState)(""),[v,N]=(0,u.useState)(""),[f,y]=(0,u.useState)(""),[w,C]=(0,u.useState)(),[b,S]=(0,u.useState)(),[_,k]=(0,u.useState)(),[Z,E]=(0,u.useState)(),[P,I]=(0,u.useState)(""),[R,O]=(0,u.useState)(!1),[F,T]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let e=async()=>{try{let{data:e}=await i.Z.get("".concat(n.b,"/single-user/").concat(a));x(e.name),j(e.email),y(e.status),N(e.role),S(e.image),I(e.exp)}catch(e){console.log(e)}};(null==s?void 0:s.token)&&e()},[s&&s.token]);let U=async e=>{try{T(!0);let{data:e}=await i.Z.post("".concat(n.b,"/delete-image-admin"),{_id:a},{headers:{Authorization:"Bearer ".concat(s.token)}});e.ok&&(S(),T(!1))}catch(e){console.log(e),T(!1),m.ZP.error("Error while deleting image."),T(!1)}},A=async e=>{if(e.preventDefault(),_!==Z){m.ZP.error("Password is not matched");return}let r=new FormData;r.append("id",a),r.append("name",h),r.append("password",_),r.append("role",v),r.append("status",f),r.append("image",w),r.append("exp",P),O(!0);try{var t;let{data:e}=await i.Z.put("".concat(n.b,"/update-user-by-admin"),r,{headers:{"Content-Type":"multipart/form-data"}});if(null==e?void 0:e.error)m.ZP.error(e.error);else{if((null==s?void 0:null===(t=s.user)||void 0===t?void 0:t._id)===e._id){p({...s,user:e});let a=JSON.parse(localStorage.getItem("auth"));a.user=e,localStorage.setItem("auth",JSON.stringify(a))}O(!1),m.ZP.success("User updated successfully")}}catch(e){console.log(e),m.ZP.error("User update failed. Try again."),O(!1)}};return(0,r.jsx)(t.Z,{children:(0,r.jsxs)(c.default,{children:[F&&"loading...",!w&&!b&&(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsx)("h5",{for:"exampleFormControlInput1",children:" Your Image"}),(0,r.jsx)("input",{onChange:e=>C(e.target.files[0]),type:"file",accept:"images/*",className:"form-control",id:"exampleFormControlInput1"})]}),w&&!b&&(0,r.jsx)("div",{className:"row pb-3",children:(0,r.jsxs)("div",{className:"col-md-12 text-center",children:[(0,r.jsx)("img",{className:"text-center bg-red",src:w&&URL.createObjectURL(w),style:{width:"100px",height:"100px",borderRadius:"50%"}}),(0,r.jsx)("div",{className:"col-md-12  text-center",children:(0,r.jsx)("small",{className:"text-danger",onClick:()=>C(),children:"delete"})})]})}),b&&(0,r.jsx)("div",{className:"row pb-3",children:(0,r.jsxs)("div",{className:"col-md-12 text-center",children:[(0,r.jsx)("img",{className:"text-center bg-red",src:(0,n.v)(b.url),style:{width:"100px",height:"100px",borderRadius:"50%"}}),(0,r.jsx)("div",{className:"col-md-12  text-center",children:(0,r.jsx)("small",{className:"text-danger",onClick:U,children:"delete"})})]})}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsx)("label",{children:" Name "}),(0,r.jsx)("input",{type:"text",className:"form-control",placeholder:"Company",name:"name",value:h,onChange:e=>x(e.target.value)})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsx)("label",{children:" Email "}),(0,r.jsx)("input",{type:"email",className:"form-control",placeholder:"Company",name:"email",value:g,onChange:e=>j(e.target.value)})]})})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsx)("label",{children:" Password "}),(0,r.jsx)("input",{type:"password",className:"form-control",name:"password",value:_,onChange:e=>k(e.target.value)})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsx)("label",{children:" Confirm Password "}),(0,r.jsx)("input",{type:"password",className:"form-control",name:"password2",value:Z,onChange:e=>E(e.target.value)})]})})]}),(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsxs)("label",{children:["Choose Role",(0,r.jsx)("span",{className:"text-danger",children:"*"})]}),(0,r.jsxs)("select",{required:!0,value:v,onChange:e=>{N(e.target.value)},className:"form-select",children:[(0,r.jsx)("option",{value:"",children:"Choose"}),(0,r.jsx)("option",{value:"admin",children:"Admin"}),(0,r.jsx)("option",{value:"author",children:"Author (Employee)"}),(0,r.jsx)("option",{value:"instructor",children:"Course Instructor"})]})]}),(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsxs)("label",{children:[" ","Working",(0,r.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"status",value:f,onChange:e=>y(e.target.value)})]}),(0,r.jsxs)("div",{className:"form-group py-2",children:[(0,r.jsxs)("label",{children:["Experience ",(0,r.jsx)("span",{className:"text-danger",children:"*"})]}),(0,r.jsx)("input",{type:"text",className:"form-control",id:"exampleFormControlInput1",name:"exp",value:P,onChange:e=>I(e.target.value)})]}),(0,r.jsx)(l.Z,{onClick:e=>A(e),loading:R,children:"Submit"})]})})}}},function(e){e.O(0,[5445,1228,2160,2121,1664,8695,9169,2735,9523,1825,4055,4737,4960,302,8890,2891,674,9238,4806,9774,2888,179],function(){return e(e.s=73682)}),_N_E=e.O()}]);