(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6816],{55202:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/cms/accounts/users",function(){return r(45191)}])},54715:function(e,t,r){"use strict";r.d(t,{BL:function(){return c},J:function(){return o}});var s=r(89701),n=r(73361),l=r(5121),a=r(67294);let c=()=>{let[e]=(0,n.a)(),[t,r]=(0,a.useState)([]),[c,o]=(0,a.useState)(!1),i=async()=>{try{o(!0);let{data:t}=await l.Z.get("".concat(s.b,"/admin/all-user"),{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.token)}});r(t.users),o(!1)}catch(e){o(!1),console.log(e)}finally{o(!1)}};(0,a.useEffect)(()=>{e&&e.token&&i()},[e&&e.token]);let d=async t=>{try{var r;if(o(!0),null===(r=window)||void 0===r?void 0:r.confirm("Are you sure?")){let{data:r}=await l.Z.delete("".concat(s.b,"/admin/delete/").concat(t),{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.token)}});i()}}catch(e){console.log(e)}finally{o(!1)}};return{list:t,loading:c,deleteUser:d}},o=()=>{let[e]=(0,n.a)(),[t,r]=(0,a.useState)(!1),[c,o]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let t=async()=>{try{r(!0);let{data:t}=await l.Z.get("".concat(s.b,"/get-all-instructors"),{headers:{Authorization:"Bearer ".concat(e.token)}});o(t),r(!1)}catch(e){r(!1),console.log(e),toast.error("Try Again")}};e&&e.token&&t()},[e&&e.token]),{instLoading:t,teachers:c}}},51447:function(e,t,r){"use strict";var s=r(85893);r(67294);var n=r(24806);t.Z=e=>{let{children:t}=e;return(0,s.jsx)(n.Z,{api:"/current-cms-user",children:t})}},46148:function(e,t,r){"use strict";var s=r(85893),n=r(16371);r(67294),t.Z=e=>{let{title:t,para:r,Icon:l}=e;return(0,s.jsxs)("div",{className:"text-start mb-5",children:[(0,s.jsxs)("h4",{className:"d-flex justify-content-start align-items-start gap-2",style:{color:n.W.primaryColor},children:[l," ",t]}),(0,s.jsx)("small",{children:r})]})}},45191:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(85893),n=r(51447),l=r(54715),a=r(46148),c=r(73361),o=r(70302);r(67294);var i=r(89583),d=r(47516),u=r(11163),h=()=>{var e;let[t]=(0,c.a)(),{loading:r,list:n,deleteUser:h}=(0,l.BL)(),x=(0,u.useRouter)();return(0,s.jsxs)(o.default,{children:[(0,s.jsx)(a.Z,{Icon:(0,s.jsx)(i.I$,{}),title:"Users",para:"Here is the user list (Roles are Instructor, Student, Admin & Coordinator)"}),r?(0,s.jsx)(s.Fragment,{children:"Loading..."}):(0,s.jsx)("div",{className:"table-responsive",children:(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.role)==="reader"?(0,s.jsx)("h4",{children:"Sorry, You don not have the right to view the data."}):(0,s.jsxs)("table",{class:"table table-striped  text-dark",style:{backgroundColor:"white",borderRadius:"10px"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:r?"loading...":"#"}),(0,s.jsx)("th",{scope:"col",children:"Name"}),(0,s.jsx)("th",{scope:"col",children:"Role"}),(0,s.jsx)("th",{scope:"col",children:"Email"})]})}),(0,s.jsx)("tbody",{children:0===n.length?(0,s.jsx)("h5",{className:"text-dark p-4",children:"No Users"}):n&&(null==n?void 0:n.map((e,r)=>{var n,l;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"text-dark",scope:"row ",children:++r}),(0,s.jsx)("td",{className:"text-dark",children:e.name}),(0,s.jsx)("td",{className:"text-dark",children:e.role}),(0,s.jsx)("td",{className:"text-dark",children:e.email}),(null==t?void 0:null===(n=t.user)||void 0===n?void 0:n._id)!==e._id&&(0,s.jsx)("td",{className:"text-dark",children:(0,s.jsx)(d.Hlf,{style:{cursor:"pointer"},onClick:()=>x.push("/cms/accounts/single/".concat(e._id))})}),(null==t?void 0:null===(l=t.user)||void 0===l?void 0:l._id)!==e._id&&(0,s.jsx)("td",{className:"text-dark",children:(0,s.jsx)(d.SW4,{style:{cursor:"pointer"},onClick:()=>h(e._id)})})]},r)}))})]})})]})},x=()=>(0,s.jsx)(n.Z,{children:(0,s.jsx)(h,{})})}},function(e){e.O(0,[5445,1228,3874,2160,2121,1664,8695,9169,2735,9523,1825,4055,4737,4960,302,8890,2891,674,9238,4806,9774,2888,179],function(){return e(e.s=55202)}),_N_E=e.O()}]);