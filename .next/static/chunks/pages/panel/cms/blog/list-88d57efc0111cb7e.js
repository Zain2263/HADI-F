(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5306],{60406:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/cms/blog/list",function(){return n(75032)}])},23237:function(e,t,n){"use strict";n.d(t,{e:function(){return c},s:function(){return a}});var o=n(89701),i=n(73361),r=n(5121),l=n(67294),s=n(86501);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"create",[t]=(0,i.a)(),[n,a]=(0,l.useState)(!1),c=async(n,i)=>{let l=new FormData;l.append("title",i.title),l.append("content",i.content),l.append("outlines",i.slug),l.append("image",i.image),l.append("description",i.description),l.append("seoTitle",i.seoTitle),l.append("metaDescription",i.metaDescription),l.append("tags",i.tags),i.categories.forEach(e=>{l.append("categories",e)});try{if(a(!0),"create"===e){let{data:e}=await r.Z.post("".concat(o.b,"/").concat(n),l,{headers:{Authorization:t&&t.token&&"Bearer ".concat(null==t?void 0:t.token)}});(null==e?void 0:e.error)?s.ZP.error(e.error,{position:"bottom-center"}):s.ZP.success("Action is done successfully",{position:"bottom-center"}),a(!1)}if("edit"===e){let{data:e}=await r.Z.put("".concat(o.b,"/").concat(n),l,{headers:{Authorization:t&&t.token&&"Bearer ".concat(null==t?void 0:t.token)}});(null==e?void 0:e.error)?s.ZP.error(e.error,{position:"bottom-center"}):s.ZP.success("Action is done successfully",{position:"bottom-center"}),a(!1)}}catch(e){console.log(e),s.ZP.error("Post create failed. Try again."),a(!1)}};return{create:c,loading:n}},c=()=>{let[e,t]=(0,l.useState)(!1),[n,a]=(0,l.useState)([]),[c]=(0,i.a)(),d=async()=>{try{t(!0);let{data:e}=await r.Z.get("".concat(o.b,"/blogs-for-admin"),{headers:{Authorization:"Bearer ".concat(null==c?void 0:c.token)}});a(e),t(!1)}catch(e){s.ZP.error("Failed, try again."),t(!1),console.log(e)}};(0,l.useEffect)(()=>{c&&c.token&&d()},[c&&c.token]);let u=async e=>{try{var t;let n=null===(t=window)||void 0===t?void 0:t.confirm("Are you sure you want to delete this blog?");if(n){let{data:t}=await r.Z.delete("".concat(o.b,"/blog/").concat(e),{headers:{Authorization:"Bearer ".concat(null==c?void 0:c.token)}});d()}}catch(e){console.log(e)}};return{list:n,loading:e,deleteBlog:u}}},51447:function(e,t,n){"use strict";var o=n(85893);n(67294);var i=n(24806);t.Z=e=>{let{children:t}=e;return(0,o.jsx)(i.Z,{api:"/current-cms-user",children:t})}},24952:function(e,t,n){"use strict";var o=n(85893);n(67294),t.Z=e=>{let{Icon:t,text:n,onClick:i}=e;return(0,o.jsxs)("div",{onClick:i,className:"d-flex justify-content-center align-items-center gap-2",children:[t,n]})}},46148:function(e,t,n){"use strict";var o=n(85893),i=n(16371);n(67294),t.Z=e=>{let{title:t,para:n,Icon:r}=e;return(0,o.jsxs)("div",{className:"text-start mb-5",children:[(0,o.jsxs)("h4",{className:"d-flex justify-content-start align-items-start gap-2",style:{color:i.W.primaryColor},children:[r," ",t]}),(0,o.jsx)("small",{children:n})]})}},75032:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var o=n(85893),i=n(23237),r=n(51447),l=n(24952),s=n(46148);n(89701);var a=n(70302),c=n(56590),d=n(41664),u=n.n(d);n(67294);var v=n(47516),g=n(89583);let p=e=>{var t,n,i;let{item:r}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:null===(t=r.description)||void 0===t?void 0:t.slice(0,200)}),(0,o.jsxs)("div",{className:"d-flex flex-row gap-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("b",{children:"Posted By:"})," ",null==r?void 0:null===(n=r.postedBy)||void 0===n?void 0:n.name]})," ","|",(0,o.jsxs)("div",{children:[(0,o.jsx)("b",{children:"Categories:"})," ",null==r?void 0:null===(i=r.categories[0])||void 0===i?void 0:i.name]})]})]})};var h=()=>{let{list:e,loading:t,deleteBlog:n}=(0,i.e)();return(0,o.jsxs)(a.default,{children:[(0,o.jsx)(s.Z,{Icon:(0,o.jsx)(v.gnI,{}),title:"All Blogs",para:"List all the blogs, you can edit and delete blog."}),(0,o.jsx)(c.Z,{itemLayout:"vertical",size:"large",dataSource:e,loading:t,renderItem:(e,t)=>{var i,r,s;return(0,o.jsx)(c.Z.Item,{actions:[(0,o.jsx)(u(),{href:"/cms/blog/detail/".concat(null==e?void 0:e._id),children:(0,o.jsx)(l.Z,{Icon:(0,o.jsx)(g.fmQ,{}),text:"Edit Blog"},"editblog")},"icon-text"),(0,o.jsx)(l.Z,{onClick:()=>n(null==e?void 0:e._id),Icon:(0,o.jsx)(v.SW4,{}),text:"Delete Blog"},"delete-blog")],extra:[(0,o.jsx)("img",{src:(null==e?void 0:null===(r=e.image)||void 0===r?void 0:null===(i=r.url)||void 0===i?void 0:i.includes("blogImages"))&&(null==e?void 0:null===(s=e.image)||void 0===s?void 0:s.url)},"blog-image")],children:(0,o.jsx)(c.Z.Item.Meta,{title:(0,o.jsx)("b",{children:e.title}),description:(0,o.jsx)(p,{item:e})})},t)}})]})},x=()=>(0,o.jsx)(r.Z,{children:(0,o.jsx)(h,{})})}},function(e){e.O(0,[5445,1228,3874,2160,2121,1664,8695,9169,2735,9523,1825,4055,4737,4960,302,8890,2891,674,9238,8905,4749,945,6590,4806,9774,2888,179],function(){return e(e.s=60406)}),_N_E=e.O()}]);