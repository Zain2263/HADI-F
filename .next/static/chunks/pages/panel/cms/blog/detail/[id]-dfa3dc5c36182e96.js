(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{54421:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/cms/blog/detail/[id]",function(){return a(46752)}])},46752:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(85893),i=a(51447),n=a(23237);a(6339);var r=a(73361),l=a(67294),o=a(86501),u=a(19051),c=a(89701),g=a(5121);let d={slug:"",seoTitle:"",metaDescription:"",title:"",tags:"",description:"",content:"",image:"",preImage:""};var m=e=>{let{id:t}=e,[a]=(0,r.a)(),i=a&&a.token,[m,f]=(0,l.useState)(d),[h,_]=(0,l.useState)([]),{create:p,loading:b}=(0,n.s)("edit"),[j,k]=(0,l.useState)(!1),v=(0,l.useCallback)(async()=>{try{k(!0);let{data:e}=await g.Z.get("".concat(c.b,"/admin/blog/").concat(t),{headers:{Authorization:"Bearer ".concat(a.token)}});console.log(e),f(e),f(t=>({...t,preImage:null==e?void 0:e.image})),f(e=>({...e,image:""})),Array.isArray(null==e?void 0:e.tags)&&f(t=>({...t,tags:null==e?void 0:e.tags.join(", ")}));let s=[];e.categories.map(e=>s.push(e.name)),_(s),k(!1)}catch(e){console.log(e),k(!1),o.ZP.error("Failed, try again.")}},[i,t]);return(0,l.useEffect)(()=>{t&&i&&v()},[v]),(0,s.jsxs)(s.Fragment,{children:[j&&"loading...",(0,s.jsx)(u.Z,{from:"blog-edit",_values:m,_setValues:f,handleSubmit:()=>p("blog/".concat(t),{...m,image:m.preImage?m.preImage:m.image,categories:h}),submitLoading:b,changeHandler:e=>{if(e.target.files){let t=e.target.files[0];if(t.size>1048576){o.ZP.error("Image size must be less than 1MB");return}f(t=>({...t,image:e.target.files[0]}))}else{let{name:t,value:a}=e.target;f(e=>({...e,[t]:a}))}},setCats:_,cats:h})]})},f=a(46148),h=a(70302),_=a(11163),p=a(47516),b=()=>{let{id:e}=(0,_.useRouter)().query;return(0,s.jsx)(i.Z,{children:(0,s.jsxs)(h.default,{children:[(0,s.jsx)(f.Z,{Icon:(0,s.jsx)(p.Hlf,{}),title:"Edit Blog"}),(0,s.jsx)(m,{id:e})]})})}}},function(e){e.O(0,[5445,1228,3874,2160,2121,1664,8695,9169,2735,9523,1825,4055,4737,4960,302,8890,2891,674,9238,8905,4749,2405,4806,603,9774,2888,179],function(){return e(e.s=54421)}),_N_E=e.O()}]);