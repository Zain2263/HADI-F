"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4214,4806],{24387:function(e,t,s){s.d(t,{Eo:function(){return d},Rt:function(){return o},WG:function(){return i},aE:function(){return u}});var l=s(89701),n=s(73361),a=s(5121),r=s(67294),c=s(86501);let o=e=>{let[t]=(0,n.a)(),s=t&&(null==t?void 0:t.token),[o,i]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),x=async()=>{try{let{data:e}=await a.Z.get("".concat(l.b,"/lms/active-batches"),{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.token)}});console.log(e,"data"),i(e),console.log(o,"acttive lists"),m(!1)}catch(e){m(!1),console.log(e)}},p=async()=>{try{let{data:e}=await a.Z.get("".concat(l.b,"/lms/completed-batches"),{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.token)}});u(e),m(!1)}catch(e){m(!1),console.log(e)}};(0,r.useEffect)(()=>{s&&("active"===e?x():"completed"===e&&p())},[s]);let j=async e=>{try{let s=confirm("Are you sure? Please check all the dates");if(s){m(!0);let{data:s}=await a.Z.put("".concat(l.b,"/lms/make-batch/").concat(e,"/complete"),{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.token)}});m(!1),c.ZP.success(s.message)}}catch(e){m(!1),console.log(e)}};return{loading:h,activeList:o,completedList:d,markCompleted:j}},i=()=>{let[e,t]=(0,r.useState)(!1),[s]=(0,n.a)(),o=async(e,n,r)=>{e.preventDefault();try{t(!0);let{data:e}=await a.Z.post("".concat(l.b,"/lms/").concat(n),r,{headers:{Authorization:"Bearer ".concat(null==s?void 0:s.token)}});if(e.ok)t(!1),c.ZP.success("Batch Created :)");else if(e.error)return t(!1),c.ZP.error(e.error)}catch(e){console.log(e),t(!1)}},i=async(e,n,r)=>{e.preventDefault();try{t(!0);let{data:e}=a.Z.put("".concat(l.b,"/lms/").concat(n),r,{headers:{Authorization:"Bearer ".concat(null==s?void 0:s.token)}});if(e.ok)t(!1),c.ZP.success("Batch Created :)");else if(e.error)return t(!1),c.ZP.error(e.error)}catch(e){console.log(e),t(!1)}};return{loading:e,handleSubmit:o,updateSubmit:i}},d=e=>{let{id:t}=e,[s,c]=(0,r.useState)({}),[o,i]=(0,r.useState)(!0),[d]=(0,n.a)();(0,r.useEffect)(()=>{d&&d.token&&u({id:t})},[d&&d.token,t]);let u=async()=>{try{let{data:e}=await a.Z.get("".concat(l.b,"/lms/single-batch/").concat(t),{headers:{Authorization:"Bearer ".concat(null==d?void 0:d.token)}});c(e),i(!1)}catch(e){i(!1),console.log(e)}};return{batch:s,loading:o}},u=()=>{let[e,t]=(0,r.useState)(!1),[s]=(0,n.a)(),[o,i]=(0,r.useState)(""),d=async e=>{try{t(!0);let{data:s}=await a.Z.get("".concat(l.b,"/lms/class-link/").concat(e));console.log(s,"here isthe class link"),i(s.classLink)}catch(e){}finally{t(!1)}},u=async(e,n)=>{try{t(!0);let{data:r}=await a.Z.patch("".concat(l.b,"/lms/add-class-link/").concat(e),{classLink:n},{headers:{Authorization:"Bearer ".concat(null==s?void 0:s.token)}});r.error?c.ZP.error(r.error):c.ZP.success("Class Link Updated")}catch(e){console.log(e)}finally{t(!1)}};return{updateClassId:u,loading:e,fetchClassLink:d,classLink:o,setClassLink:i}}},35581:function(e,t,s){s.d(t,{n:function(){return r}});var l=s(73361),n=s(31955),a=s(11163);let r=()=>{let[e,t]=(0,l.a)(),s=(0,a.useRouter)();return{logout:()=>{n.Z.remove("auth"),t({user:null,token:""}),s.push("/")}}}},17340:function(e,t,s){s.d(t,{Co:function(){return i},kU:function(){return o}});var l=s(89701),n=s(73361),a=s(5121),r=s(11163),c=s(67294);let o=()=>{let[e]=(0,n.a)(),t=e&&(null==e?void 0:e.token),[s,o]=(0,c.useState)(!1),i=(0,r.useRouter)(),d=async()=>{try{let{data:e}=await a.Z.get("".concat(l.b,"/current-student"));e.ok&&o(!1)}catch(e){o(!1),console.log(e),i.push("/")}};return(0,c.useEffect)(()=>{t&&d()},[t]),{loading:s}},i=()=>{let[e,t]=c.useState(!1),[s]=(0,n.a)(),o=s&&(null==s?void 0:s.token),i=(0,r.useRouter)();c.useEffect(()=>{o&&d()},[o]);let d=async()=>{try{t(!0);let{data:e}=await a.Z.get("".concat(l.b,"/current-student-or-instructor"));e.ok?t(!1):e.error&&(t(!1),i.push("/"))}catch(e){t(!1),console.log(e),i.push("/")}};return{loading:e}};t.ZP=e=>{let[t,s]=c.useState(!0),[o]=(0,n.a)(),i=(0,r.useRouter)();c.useEffect(()=>{(null==o?void 0:o.token)&&d()},[null==o?void 0:o.token]);let d=async()=>{try{let{data:t}=await a.Z.get("".concat(l.b,"/").concat(e));t.ok?s(!1):t.error&&(s(!1),i.push("/"))}catch(e){s(!1),console.log(e),i.push("/")}};return{loading:t}}},24806:function(e,t,s){s.d(t,{Z:function(){return E}});var l=s(85893),n=s(17340),a=s(67294),r=s(16373),c=s(38614),o=s(1825),i=s(82891),d=s(84960),u=s(65400),h=s.n(u),m=s(75746),x=s(95642),p=s(78390),j=s(73361),f=s(89583),v=s(12386),b=s(11163),y=s(46012),g=s(77591),k=s(5005),Z=s(5434),C=s(47360),S=e=>{var t,s;let{from:n="without-sidebar"}=e,a=(0,b.useRouter)(),[r]=(0,j.a)();return(0,l.jsxs)(v.default,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"sidebar"===n?"90%":"100%",borderRight:"sidebar"===n?0:"0.01rem solid #80808026",background:"white",color:"#0f3f5d"},children:[(0,l.jsx)("div",{className:"".concat("sidebar"===n?"text-start":"text-center"),children:(0,l.jsx)(C.Z,{})}),(0,l.jsx)(v.default.Item,{className:"mt-3",onClick:()=>a.push("/"),icon:(0,l.jsx)(k.Z,{}),style:{},children:"Home"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/lms"),className:"mt-1",style:(0,y.b)("/lms",a)?y.U:{},icon:(0,l.jsx)(Z.adB,{}),children:"Dashboard"}),(0,l.jsx)(v.default.Item,{className:"mt-2",icon:(0,l.jsx)(Z.adB,{}),onClick:()=>a.push("/lms/enrollments/applications"),style:(0,y.b)("applications",a)?y.U:{},children:"Applications"}),(0,l.jsx)(v.default.Item,{className:"mt-1",icon:(0,l.jsx)(Z.adB,{}),onClick:()=>a.push("/lms/enrollments/charts"),style:(0,y.b)("/lms/enrollments/charts",a)?y.U:{},children:"Enrollments Charts"}),(0,l.jsx)(v.default.Item,{className:"mt-3",style:(0,y.b)("course/list",a)?y.U:{},onClick:()=>a.push("/lms/course/list"),icon:(0,l.jsx)(f.FcZ,{}),children:"Courses"}),(0,l.jsx)(v.default.Item,{style:(0,y.b)("add",a)?y.U:{},onClick:()=>a.push("/lms/course/add"),className:"mt-1",icon:(0,l.jsx)(Z.iy3,{}),children:"Add Course"}),(0,l.jsx)(v.default.Item,{style:(0,y.b)("active-batches",a)?y.U:{},onClick:()=>a.push("/lms/batch/list/active"),className:"mt-3",icon:(0,l.jsx)(Z.dBs,{}),children:"Active Batches"}),(0,l.jsx)(v.default.Item,{style:(0,y.b)("completed-batches",a)?y.U:{},onClick:()=>a.push("/lms/batch/list/completed"),className:"mt-1",icon:(0,l.jsx)(f.wEH,{}),children:"Completed Batches"}),(0,l.jsx)(v.default.Item,{style:(0,y.b)("create-batches",a)?y.U:{},onClick:()=>a.push("/lms/batch/add"),className:"mt-1",icon:(0,l.jsx)(Z.XOt,{}),children:"Create Batches"}),(0,l.jsx)(v.default.Item,{style:(0,y.b)("/students/list",a)?y.U:{},onClick:()=>a.push("/lms/students/list"),className:"mt-3",icon:(0,l.jsx)(f.wEH,{}),children:"Students"}),(0,l.jsx)(v.default.Item,{style:(0,y.b)("enrolled-students",a)?y.U:{},onClick:()=>a.push("/lms/students/enrolled-students"),className:"mt-1",icon:(0,l.jsx)(Z.NZx,{}),children:"Enrolled Students"}),(null==r?void 0:r.user)&&((null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.role)==="admin"||(null==r?void 0:null===(s=r.user)||void 0===s?void 0:s.role)==="reader")&&(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/admin"),className:"mt-3",icon:(0,l.jsx)(g.Z,{}),children:"Back"})]})},N=e=>{var t,s;let{from:n="without-sidebar"}=e,a=(0,b.useRouter)(),[r]=(0,j.a)();return(0,l.jsxs)(v.default,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"sidebar"===n?"90%":"100%",borderRight:"sidebar"===n?0:"0.01rem solid #80808026",background:"white",color:"#0f3f5d"},children:[(0,l.jsx)("div",{className:"".concat("sidebar"===n?"text-start":"text-center"),children:(0,l.jsx)(C.Z,{})}),(0,l.jsx)(v.default.Item,{className:"mt-3",icon:(0,l.jsx)(k.Z,{}),onClick:()=>a.push("/"),style:(0,y.b)("/",a)?y.U:{},children:"Home"}),(0,l.jsx)(v.default.Item,{className:"mt-1",icon:(0,l.jsx)(Z.adB,{}),children:"Dashboard"}),(0,l.jsx)(v.default.Item,{className:"mt-3",onClick:()=>a.push("/cms/accounts/users"),icon:(0,l.jsx)(f.FcZ,{}),children:"Instructors"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/accounts/create"),className:"mt-1",icon:(0,l.jsx)(Z.iy3,{}),children:"Create Acounts"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/categories"),className:"mt-3",icon:(0,l.jsx)(Z.dwX,{}),children:"Categories"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/course/list"),className:"mt-3",icon:(0,l.jsx)(Z.dBs,{}),children:"Courses"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/course/add"),className:"mt-1",icon:(0,l.jsx)(f.wEH,{}),children:"Add Courses"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/workshop/list"),className:"mt-3",icon:(0,l.jsx)(Z.XOt,{}),children:"Workshops"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/workshop/add"),className:"mt-1",icon:(0,l.jsx)(f.wEH,{}),children:"Add Workshops"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/blog/add"),className:"mt-3",icon:(0,l.jsx)(Z.x06,{}),children:"Add Blog"}),(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/cms/blog/list"),className:"mt-1",icon:(0,l.jsx)(Z.MiD,{}),children:"All Blogs"}),(null==r?void 0:r.user)&&((null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.role)==="admin"||(null==r?void 0:null===(s=r.user)||void 0===s?void 0:s.role)==="reader")&&(0,l.jsx)(v.default.Item,{onClick:()=>a.push("/admin"),className:"mt-3",icon:(0,l.jsx)(g.Z,{}),children:"Back"})]})},w=e=>{let{from:t="without-sidebar"}=e,s=(0,b.useRouter)();return(0,l.jsxs)(v.default,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"sidebar"===t?"90%":"100%",borderRight:"sidebar"===t?0:"0.01rem solid #80808026",background:"white",color:"#0f3f5d"},children:[(0,l.jsx)("div",{className:"".concat("sidebar"===t?"text-start":"text-center"),children:(0,l.jsx)(C.Z,{})}),(0,l.jsx)(v.default.Item,{className:"mt-3",icon:(0,l.jsx)(k.Z,{}),style:(0,y.b)("/",s)?y.U:{},children:"Home"}),(0,l.jsx)(v.default.Item,{onClick:()=>s.push("/cms"),className:"mt-3",icon:(0,l.jsx)(f.k7O,{}),children:"CMS"}),(0,l.jsx)(v.default.Item,{onClick:()=>s.push("/lms"),className:"mt-1",icon:(0,l.jsx)(Z.OmY,{}),children:"LMS"})]})},I=s(35581);let{Sider:_,Header:A,Content:B}=r.default,{useBreakpoint:P}=c.default;var E=e=>{var t;let{children:s,api:c}=e,[u]=(0,j.a)(),[v,b]=a.useState(!1),{logout:y}=(0,I.n)(),{loading:g}=(0,n.ZP)(c),k=P(),C=[{key:"1",label:(0,l.jsx)("span",{children:"Profile"}),icon:(0,l.jsx)(f.Xws,{})},{key:"2",label:(0,l.jsx)("span",{target:"_blank",rel:"noopener noreferrer",href:"https://www.aliyun.com",children:"Logout"}),icon:(0,l.jsx)(p.Z,{}),onClick:y}];return(0,l.jsxs)(r.default,{style:{minHeight:"100vh"},children:[k.md&&(0,l.jsx)(_,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:c.includes("lms")?(0,l.jsx)(S,{}):c.includes("cms")?(0,l.jsx)(N,{}):c.includes("admin")&&(0,l.jsx)(w,{})}),(0,l.jsxs)(r.default,{children:[(0,l.jsxs)(A,{className:"bg-light",style:{width:"100%",backgroundColor:"white !important",display:"flex",justifyContent:"space-between",gap:"20px",alignItems:"center",padding:"20px",borderBottom:"0.01rem solid #80808026"},children:[!k.md&&(0,l.jsx)(m.Z,{style:{fontSize:20},onClick:()=>b(!0)}),(0,l.jsx)("h5",{style:{color:"#0f3f5d",marginLeft:"".concat(k.md?"200px":"0px")},children:" Welcome Hadi, "}),(0,l.jsx)(i.default,{menu:{items:C},children:(0,l.jsx)(d.ZP,{style:{backgroundColor:"#0f3f5d",color:"white",justifySelf:"end"},children:null==u?void 0:null===(t=u.user)||void 0===t?void 0:t.name[0]})}),(0,l.jsxs)(o.Z,{placement:"left",closable:!1,onClose:()=>b(!1),open:v,extra:(0,l.jsx)(x.default,{style:{color:"black"},onClick:()=>b(!1)}),children:[c.includes("lms")?(0,l.jsx)(S,{from:"sidebar"}):c.includes("cms")?(0,l.jsx)(N,{from:"sidebar"}):c.includes("admin")&&(0,l.jsx)(w,{from:"sidebar"}),(0,l.jsx)(h(),{style:{width:"100%"},onClick:()=>b(!1),children:(0,l.jsx)(Z.FU5,{})})]})]}),(0,l.jsx)(B,{style:{minHeight:"80vh",marginLeft:"".concat(k.md?"200px":"0px"),padding:"20px",background:"white"},children:g?"loading...":s})]})]})}},91554:function(e,t,s){var l=s(85893);s(67294);var n=s(24806);t.Z=e=>{let{children:t}=e;return(0,l.jsx)(n.Z,{api:"/current-lms-user",children:t})}},3033:function(e,t,s){s.d(t,{Z:function(){return S}});var l=s(85893),n=s(89701),a=s(65400),r=s.n(a),c=s(8448),o=s(74253),i=s(56590),d=s(56697),u=s(74048),h=s(59361),m=s(5121),x=s(67294),p=s(86501),j=s(73361),f=e=>{var t,s,a;let{batch:r,setBatch:c,currentStudent:o,setCurrentStudent:i,addPaymentsModel:u,setAddPaymentsModel:h,setUpdatePaymentsModel:f,updatePaymentsModel:v,from:b="all-students"}=e,[y]=(0,j.a)(),[g,k]=(0,x.useState)(!1),[Z,C]=(0,x.useState)(!1),[S,N]=(0,x.useState)(),[w,I]=(0,x.useState)(!1),[_,A]=(0,x.useState)(0),[B,P]=(0,x.useState)(""),[E,U]=(0,x.useState)(""),[F,M]=(0,x.useState)(!1),D=async e=>{e.preventDefault();try{if(!_||!B)return p.Am.error("Fields are required**");M(!0);let{data:e}=await m.Z.put("".concat(n.b,"/lms/add/").concat(o._id,"/").concat(r._id,"/payments"),{amount:_,comment:B,completed:w});if(e.ok){if("all-students"===b)setCurrent(e=>({...e,payments:[...e.payments,{amount:_,comment:B,completed:w,batch:E}]}));else if("batches"===b){let e=r.enrolledStudents.map(e=>{if(e._id===o._id){var t;return{...e,payments:[...e.payments,{completed:w,amount:_,comment:B,addBy:null==y?void 0:null===(t=y.user)||void 0===t?void 0:t._id,batch:{_id:r._id}}]}}return e});c(t=>({...t,enrolledStudents:e}))}p.Am.success("Payment is added successfully"),M(!1),A(0),I(!1),P(""),U("")}}catch(e){M(!1),console.log(e)}},O=async()=>{try{if(!_||!B)return p.Am.error("Fields are required**");{M(!0);let{data:e}=await m.Z.put("".concat(n.b,"/lms/update/").concat(o._id,"/").concat(S,"/").concat(null==r?void 0:r._id,"/payments"),{amount:_,comment:B,completed:w});if(e.ok){if(M(!1),p.Am.success("Added"),A(0),P(""),I(!1),"all-students"===b)setCurrent(e=>({...e,payments:[...e.payments,{completed:w,amount:_,comment:B}]}));else if("batches"===b){console.log("running...");let e={comment:B,completed:w,amount:_,batch:{_id:E}},t=r.enrolledStudents.map(t=>{if(t._id===o._id){let s=t.payments.map(t=>t.batch._id===r._id?{...t,...e}:t);return{...t,payments:s}}return t});c(e=>({...e,enrolledStudents:t}))}}}}catch(e){M(!1),console.log(e)}};return(0,x.useEffect)(()=>{var e;let t=o&&(null===(e=o.payments)||void 0===e?void 0:e.find(e=>e.batch._id===r._id));t&&(U(r._id),A(t.amount),P(t.comment),I(t.completed),N(t._id))},[o,o.payments,null==r?void 0:r._id]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.Z,{title:"Add Payments",centered:!0,open:u,onOk:D,onCancel:()=>h(!1),width:500,children:[F&&(0,l.jsx)("p",{children:"loading..."}),(0,l.jsxs)("form",{onSubmit:D,children:[(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("label",{children:"Amount"}),(0,l.jsx)("input",{type:"number",className:"form-control",value:_,onChange:e=>A(e.target.value)})]}),(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("label",{children:"Comment"}),(0,l.jsx)("input",{type:"text",className:"form-control",value:B,onChange:e=>P(e.target.value)})]}),(0,l.jsxs)("div",{className:"d-flex justify-content-start align-items-center gap-3 my-2",children:[(0,l.jsx)("label",{children:"Is Complete?"}),(0,l.jsx)("input",{type:"checkbox",checked:w,onChange:e=>I(!w)})]}),(null==o?void 0:null===(t=o.completedBatches)||void 0===t?void 0:t.length)>0&&(0,l.jsxs)("div",{className:"form-group py-2",children:[(0,l.jsx)("label",{children:" Select From Completed Batches "}),(0,l.jsxs)("select",{value:E,onChange:e=>U(e.target.value),className:"form-control",name:"batchId",children:[(0,l.jsx)("option",{children:"* Select From Completed Batches"}),"all-students"===b?null==r?void 0:null===(s=r.completedBatches)||void 0===s?void 0:s.map((e,t)=>(0,l.jsx)("option",{value:e._id,children:e.title},t)):null==r?void 0:null===(a=r.completedBatches)||void 0===a?void 0:a.map((e,t)=>(0,l.jsx)("option",{value:e,children:e},t))]})]})]})]}),(0,l.jsxs)(d.Z,{title:"Update Payment",centered:!0,open:v,onOk:O,onCancel:()=>f(!1),width:500,children:[F&&(0,l.jsx)("p",{children:"loading..."}),(0,l.jsxs)("form",{onSubmit:O,children:[(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("label",{children:"Amount"}),(0,l.jsx)("input",{type:"number",className:"form-control",value:_,onChange:e=>A(e.target.value)})]}),(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("label",{children:"Comment"}),(0,l.jsx)("input",{type:"text",className:"form-control",value:B,onChange:e=>P(e.target.value)})]}),(0,l.jsxs)("div",{className:"d-flex justify-content-start align-items-center gap-3 my-2",children:[(0,l.jsx)("label",{children:"Is Complete?"}),(0,l.jsx)("input",{type:"checkbox",checked:w,onChange:e=>I(!w)})]})]})]})]})},v=s(64749),b=s(84960),y=s(51024);let{Search:g}=y.default;var k=e=>{var t;let{current:s,openStudentModal:a,setOpenStudentModal:c,setCurrent:o}=e,[j,f]=(0,x.useState)(!1),[y,k]=(0,x.useState)([]),[Z,C]=(0,x.useState)(1),[S,N]=(0,x.useState)(1),[w,I]=(0,x.useState)(""),[_,A]=(0,x.useState)(!1),B=(0,x.useCallback)(async()=>{try{f(!0);let e=await m.Z.get("".concat(n.b,"/students"),{params:{page:Z,search:w}}),{users:t,totalPages:s}=e.data;k(t),N(s),f(!1)}catch(e){console.log(e)}},[Z,w]);(0,x.useEffect)(()=>{B()},[B]);let P=async(e,t,s)=>{try{A(!0);let{data:l}=await m.Z.put("".concat(n.b,"/lms/add/").concat(t,"/").concat(e,"/student"));l.error?(A(!1),p.Am.error(l.error,{position:"bottom-center"})):(A(!1),p.Am.success(l.message,{position:"bottom-center"}),o(e=>({...e,enrolledStudents:[...e.enrolledStudents,s]})),console.log(s,"add stu from setCurrent"))}catch(e){A(!1),console.log(e,{position:"bottom-center"})}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(d.Z,{title:"Add Students to ".concat(s.title," -> ").concat(null===(t=s.courseDetails)||void 0===t?void 0:t.title),centered:!0,open:a,onOk:()=>c(!1),onCancel:()=>c(!1),width:1e3,children:[(0,l.jsx)(h.Z,{color:"green",children:"All Students"}),(0,l.jsx)(h.Z,{color:"red",children:" Please check carefully payments status "}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)(u.default,{wrap:!0,children:[(0,l.jsx)(g,{addonBefore:"Students",placeholder:"input search text",allowClear:!0,value:w,onChange:e=>{I(e.target.value),C(1)},style:{width:304}}),(0,l.jsx)(v.default,{style:{width:120},placeholder:"Select Page",onChange:e=>{C(e)},options:[{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4}]})]}),(0,l.jsx)(i.Z,{className:"mt-4",itemLayout:"horizontal",dataSource:y,loading:j||_,renderItem:(e,t)=>(0,l.jsx)(l.Fragment,{children:!s.enrolledStudents.some(t=>t._id===e._id)&&(0,l.jsx)(i.Z.Item,{actions:[(0,l.jsxs)("a",{onClick:()=>P(s._id,e._id,e),children:["Add ",e.enrolledBatches.includes]},"list-loadmore-edit")],children:(0,l.jsx)(i.Z.Item.Meta,{avatar:(0,l.jsx)(b.ZP,{src:"https://xsgames.co/randomusers/avatar.php?g=pixel&key=".concat(t)}),title:(0,l.jsx)("a",{href:"https://ant.design",children:e.name}),description:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(h.Z,{color:"blue",children:["Assigned Batches : ",e.enrolledBatches.length]})})})})})}),Z<S&&(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)(r(),{onClick:()=>{C(e=>e+1)},children:"Load More"})})]})})};let{Search:Z}=y.default;var C=e=>{var t;let{setCurrent:s,current:a,openInstructorModels:c,setOpenInstructorModels:o}=e,[j,f]=(0,x.useState)(!1),[y,g]=(0,x.useState)([]),[k,C]=(0,x.useState)(1),[S,N]=(0,x.useState)(1),[w,I]=(0,x.useState)(""),[_,A]=(0,x.useState)(!1),[B,P]=(0,x.useState)({}),E=(0,x.useCallback)(async()=>{try{f(!0);let e=await m.Z.get("".concat(n.b,"/instructors"),{params:{page:k,search:w}}),{users:t,totalPages:s}=e.data;g(t),N(s),f(!1)}catch(e){console.log(e)}},[k,w]);(0,x.useEffect)(()=>{E()},[E]);let U=async(e,t,l)=>{try{A(!0);let{data:r}=await m.Z.put("".concat(n.b,"/lms/add/").concat(e,"/teacher"),{teacherId:t});r.error?(A(!1),p.Am.error(r.error,{position:"bottom-center"})):(p.Am.success(r.message,{position:"bottom-center"}),s({...a,teachers:[...a.teachers,l]}),g(y.filter(e=>e._id!==t)),A(!1)),A(!1)}catch(e){A(!1),console.log(e,{position:"bottom-center"})}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(d.Z,{title:"Add Students to ".concat(a.title," -> ").concat(null===(t=a.courseDetails)||void 0===t?void 0:t.title),centered:!0,open:c,onOk:()=>o(!1),onCancel:()=>o(!1),width:1e3,children:[(0,l.jsx)(h.Z,{color:"green",children:"All Students"}),(0,l.jsx)(h.Z,{color:"red",children:" Please check carefully payments status "}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)(u.default,{wrap:!0,children:[(0,l.jsx)(Z,{addonBefore:"Students",placeholder:"input search text",allowClear:!0,value:w,onChange:e=>{I(e.target.value),C(1)},style:{width:304}}),(0,l.jsx)(v.default,{style:{width:120},placeholder:"Select Page",onChange:e=>{C(e)},options:[{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4}]})]}),(0,l.jsx)(i.Z,{className:"mt-4",itemLayout:"horizontal",dataSource:y,loading:j||_,renderItem:(e,t)=>{var s,n;return(0,l.jsx)(l.Fragment,{children:!a.teachers.some(t=>t._id===e._id)&&(0,l.jsx)(i.Z.Item,{actions:[(0,l.jsxs)("a",{onClick:()=>{U(a._id,e._id,e),P(e)},children:["Add ",null==e?void 0:null===(s=e.enrolledBatches)||void 0===s?void 0:s.includes]},"list-loadmore-edit")],children:(0,l.jsx)(i.Z.Item.Meta,{avatar:(0,l.jsx)(b.ZP,{src:"https://xsgames.co/randomusers/avatar.php?g=pixel&key=".concat(t)}),title:(0,l.jsx)("a",{href:"https://ant.design",children:e.name}),description:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(h.Z,{color:"blue",children:["Assigned Batches : ",null==e?void 0:null===(n=e.assignedBatches)||void 0===n?void 0:n.length]})})})})})}}),k<S&&(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)(r(),{onClick:()=>{C(e=>e+1)},children:"Load More"})})]})})},S=e=>{var t,s,a;let{current:j,open:v,setOpen:b,setCurrent:y}=e,[g,Z]=(0,x.useState)(!1),[S,N]=(0,x.useState)(!1),[w,I]=(0,x.useState)({}),[_,A]=(0,x.useState)(!1),[B,P]=(0,x.useState)(!1),[E,U]=(0,x.useState)(!1),F=async(e,t)=>{try{if(confirm("Are you sure?")){let{data:s}=await m.Z.put("".concat(n.b,"/lms/remove/").concat(e,"/").concat(t,"/student"));s.ok?(p.ZP.success("Student UnAssigned"),y({...j,enrolledStudents:j.enrolledStudents.filter(t=>t._id!==e)})):s.error&&p.ZP.error("Error")}}catch(e){console.log(e)}},M=async(e,t)=>{try{if(confirm("Are you sure?")){let{data:s}=await m.Z.put("".concat(n.b,"/lms/remove/").concat(t,"/teacher"),{teacherId:e});s.ok?(p.ZP.success("Instructor UnAssigned",{position:"bottom-center"}),y({...j,teachers:j.teachers.filter(t=>t._id!==e)})):s.error&&p.ZP.error("Error")}}catch(e){console.log(e)}},D=async(e,t)=>{if(!j.completed)return p.ZP.error("batch is not completed yet:|");A(!0);try{if(confirm("Are you sure?")){let{data:s}=await m.Z.put("".concat(n.b,"/lms/certifications/").concat(e,"/").concat(t));if(s.ok){let s=j.enrolledStudents.map(s=>s._id===e?{...s,certifications:[...s.certifications,{batch:t}]}:s);y({...j,enrolledStudents:s}),p.ZP.success("Certifated",{position:"bottom-center"}),A(!1)}else s.error&&(p.ZP.error("Error"),A(!1))}}catch(e){console.log(e)}},O=e=>{let t=e.payments.find(e=>{var t;return(null===(t=e.batch)||void 0===t?void 0:t._id)===j._id});if(t&&t.completed){var s;return(0,l.jsx)(l.Fragment,{children:(null==e?void 0:null===(s=e.certifications)||void 0===s?void 0:s.find(e=>e.batch===(null==j?void 0:j._id)))?(0,l.jsx)(h.Z,{role:"button",color:"#0f3f5d",onClick:()=>D(null==e?void 0:e._id,null==j?void 0:j._id),children:"Certified"}):(0,l.jsx)(h.Z,{role:"button",color:"#0f3f5d",onClick:()=>D(null==e?void 0:e._id,null==j?void 0:j._id),children:"Give him certificate"})})}return t&&!t.completed?(0,l.jsx)(h.Z,{onClick:()=>{I(e),N(!0)},role:"button",color:"#31af98",children:"Update payment"}):(0,l.jsx)(h.Z,{onClick:()=>{Z(!0),I(e)},role:"button",color:"blue",children:"Add payment"})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.Z,{title:"".concat(null==j?void 0:j.title),centered:!0,open:v,onOk:()=>b(!1),onCancel:()=>b(!1),width:1300,children:[(0,l.jsxs)(c.ZP,{title:"".concat(null===(t=j.courseDetails)||void 0===t?void 0:t.title," "),bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[(0,l.jsxs)(c.ZP.Item,{label:"Conducting Days",children:[j.monday&&(0,l.jsx)(h.Z,{children:"Monday"}),j.tuesday&&(0,l.jsx)(h.Z,{children:"Tuesday"}),j.wednesday&&(0,l.jsx)(h.Z,{children:"Wednesday"}),j.thursday&&(0,l.jsx)(h.Z,{children:"Thursday"}),j.friday&&(0,l.jsx)(h.Z,{children:"Friday"}),j.saturday&&(0,l.jsx)(h.Z,{children:"Saturday"})]}),(0,l.jsxs)(c.ZP.Item,{label:"Start - End",children:[null===(s=j.startDate)||void 0===s?void 0:s.substring(0,10)," to ",null===(a=j.endDate)||void 0===a?void 0:a.substring(0,10)," "]}),(0,l.jsx)(c.ZP.Item,{label:"timing",children:j.timming}),(0,l.jsx)(c.ZP.Item,{label:"Durations",children:j.duration}),(0,l.jsx)(c.ZP.Item,{label:"Enrollment Limits",children:j.limit}),(0,l.jsx)(c.ZP.Item,{label:"Completed",children:j.completed?"Yes":"No"}),!1===j.completed&&(0,l.jsx)(c.ZP.Item,{label:"Settings",children:(0,l.jsxs)(u.default,{wrap:!0,children:[(0,l.jsx)(r(),{type:"primary",onClick:()=>P(!0),children:"Add Students"}),(0,l.jsx)(r(),{type:"dashed",role:"button",onClick:()=>U(!0),children:"Assign Instructor to this batch"})]})})]}),(0,l.jsx)(o.Z,{orientation:"left",children:"Enrolled Students"}),(0,l.jsx)(i.Z,{size:"small",bordered:!0,dataSource:null==j?void 0:j.enrolledStudents,renderItem:e=>{var t,s,n,a;return(0,l.jsx)(i.Z.Item,{actions:[(0,l.jsxs)(x.Fragment,{children:[" ",O(e)]},3),(0,l.jsxs)(h.Z,{role:"button",color:(null===(s=e.payments)||void 0===s?void 0:null===(t=s.find(e=>e.batch._id===j._id))||void 0===t?void 0:t.completed)?"green":"blue",children:["payments - ",null===(n=e.payments)||void 0===n?void 0:n.length,(null===(a=e.payments)||void 0===a?void 0:a.find(e=>e.batch._id===j._id))?"Added":" Not Added"]},1),(0,l.jsx)(h.Z,{role:"button",color:j.completed?"gray":"red",onClick:()=>j.completed?"":F(e._id,j._id),children:"Un Assign"},2)],children:(0,l.jsx)(i.Z.Item.Meta,{title:e.name,description:e._id})},e._id)}}),(0,l.jsx)(o.Z,{orientation:"left",children:"Assigned Teachers"}),(0,l.jsx)(i.Z,{size:"small",bordered:!0,dataSource:null==j?void 0:j.teachers,renderItem:e=>(0,l.jsx)(i.Z.Item,{actions:[(0,l.jsx)(h.Z,{role:"button",color:"red",onClick:()=>M(e._id,j._id),children:"Un Assign"},"unassign")],children:(0,l.jsx)(i.Z.Item.Meta,{title:e.name,description:e._id})})})]}),!j.completed&&(0,l.jsx)(k,{current:j,setCurrent:y,openStudentModal:B,setOpenStudentModal:P}),!j.completed&&(0,l.jsx)(C,{setCurrent:y,current:j,openInstructorModels:E,setOpenInstructorModels:U}),(0,l.jsx)(f,{from:"batches",batch:j,setBatch:y,setUpdatePaymentsModel:N,updatePaymentsModel:S,currentStudent:w,setCurrentStudent:I,addPaymentsModel:g,setAddPaymentsModel:Z})]})}},63899:function(e,t,s){var l=s(85893);s(24387);var n=s(59361),a=s(41664),r=s.n(a);s(67294);var c=s(63750),o=s(89583);t.Z=e=>{let{from:t,loading:s,list:a,markCompleted:i,setCurrent:d,setOpen:u}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{class:"table table-striped  text-dark",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",children:s?"loading...":"#"}),(0,l.jsx)("th",{scope:"col",children:"Batch"}),(0,l.jsx)("th",{scope:"col",children:"Assign Course"}),(0,l.jsx)("th",{scope:"col",children:" Assigned Students "}),(0,l.jsx)("th",{scope:"col",children:" Instructors "}),(0,l.jsx)("th",{scope:"col",children:" From "}),(0,l.jsx)("th",{scope:"col",children:" To "}),(0,l.jsx)("th",{scope:"col",children:" "}),(0,l.jsx)("th",{scope:"col",children:" "}),(0,l.jsx)("th",{scope:"col",children:" "})]})}),(0,l.jsx)("tbody",{children:0!==a.length||s?null==a?void 0:a.map((e,s)=>{var a,h,m,x;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"text-dark",scope:"row ",children:++s}),(0,l.jsx)("td",{className:"text-dark",children:e.title}),(0,l.jsx)("td",{className:"text-dark",children:(0,l.jsx)(r(),{href:"/lms/course/".concat(null===(a=e.courseDetails)||void 0===a?void 0:a._id),children:(0,l.jsx)("span",{children:null===(h=e.courseDetails)||void 0===h?void 0:h.title})})}),(0,l.jsx)("td",{className:"text-dark",children:null===(m=e.enrolledStudents)||void 0===m?void 0:m.length}),(0,l.jsx)("td",{className:"text-dark",children:null===(x=e.teachers)||void 0===x?void 0:x.length}),(0,l.jsx)("td",{className:"text-dark",children:e.startDate.substring(0,10)}),(0,l.jsx)("td",{className:"text-dark",children:e.endDate.substring(0,10)}),(0,l.jsx)("td",{className:"text-dark",children:(0,l.jsx)(c.Icw,{role:"button",onClick:()=>{d(e),u(!0)}})}),"active"===t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"text-dark",children:(0,l.jsx)(r(),{href:"/lms/batch/detail/".concat(e._id),children:(0,l.jsx)(o.fmQ,{role:"button"})})}),(0,l.jsx)("td",{className:"text-dark",children:(0,l.jsx)(n.Z,{role:"button",onClick:()=>i(e._id),children:"Mark as complete"})})]})]},e._id)}):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"6",className:"text-center",children:"No Batch"})})})]})})})}},47360:function(e,t,s){var l=s(85893),n=s(25675),a=s.n(n),r=s(41664),c=s.n(r);s(67294),t.Z=()=>(0,l.jsx)(c(),{href:"/",children:(0,l.jsx)(a(),{height:70,width:150,src:"/images/primary.svg",alt:"logo"})})},46148:function(e,t,s){var l=s(85893),n=s(16371);s(67294),t.Z=e=>{let{title:t,para:s,Icon:a}=e;return(0,l.jsxs)("div",{className:"text-start mb-5",children:[(0,l.jsxs)("h4",{className:"d-flex justify-content-start align-items-start gap-2",style:{color:n.W.primaryColor},children:[a," ",t]}),(0,l.jsx)("small",{children:s})]})}},46012:function(e,t,s){s.d(t,{U:function(){return a},b:function(){return n}});var l=s(16371);let n=(e,t)=>!!t.pathname.includes(e),a={backgroundColor:"white",color:l.W.primaryColor,fontWeight:"bold",borderRight:"0.2rem solid ".concat(l.W.primaryColor),borderRadius:"0px"}},89701:function(e,t,s){s.d(t,{b:function(){return n},v:function(){return a}});let l="https://api.hadielearning.com",n="".concat(l,"/api"),a=e=>"".concat(l,"/").concat(e.replace(/\\/g,"/"))},16371:function(e,t,s){s.d(t,{W:function(){return l}});let l={primaryColor:"#0f3f5d",secondaryColor:"#0fa98a",inputBox:{border:"1px solid #0f3f5d",color:"#0f3f5d",borderRadius:"8px"},toastBootom:{position:"bottom-center"}}}}]);